{# gallery-recent-block.html.twig #}

{% if albums is not empty %}
  <div class="s3-gallery-recent mb-5">
    
    {# --- Header & Button Row --- #}
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="block-title mb-0">{{ "Recente foto's"|t }}</h2>
      <a href="/photos" class="btn btn-primary">
        {{ "Alle foto's"|t }}
      </a>
    </div>

    <div class="row">
      {% for album in albums %}
        {# LOGIC: If this is item 3 or 4, hide it on mobile (d-none) but show on desktop (d-md-block) #}
        {% set visibility_class = (loop.index > 2) ? 'd-none d-md-block' : '' %}

        {# GRID: col-6 (2 per row mobile) -> col-md-3 (4 per row desktop) #}
        <div class="col-6 col-md-3 mb-4 {{ visibility_class }}">
          <div class="card h-100 shadow-sm album-card">
            <a href="{{ album.url }}" class="text-decoration-none text-dark">
              {% if album.preview %}
                <img src="//wsrv.nl/?url={{ album.preview }}&w=400&h=300&fit=cover&output=webp" 
                     class="card-img-top" 
                     alt="{{ album.title }}"
                     loading="lazy">
              {% else %}
                <div class="bg-light d-flex align-items-center justify-content-center" style="height: 150px;">
                  <span class="text-muted small">No Preview</span>
                </div>
              {% endif %}
              
              <div class="card-body p-2 text-center">
                <p class="card-text small fw-bold mb-0" style="font-size: 0.85rem; line-height: 1.2;">
                  {{ album.title }}
                </p>
              </div>
            </a>
          </div>
        </div>
      {% endfor %}
    </div>

  </div>
{% endif %}